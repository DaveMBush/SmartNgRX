import{a as m}from"./chunk-3VZM5QD4.js";import{a as l}from"./chunk-FVRGWNNR.js";import"./chunk-VM5ESKQM.js";import{a as n}from"./chunk-C6HCTMWR.js";import{L as c,Qa as h,Ra as p,Rb as b,ia as d,va as i}from"./chunk-O5TFSMGJ.js";import{a as s,b as r,g as w}from"./chunk-JPKLQMV2.js";var f=w(b());var y={title:"Tree Component",mdFile:"./index.md",order:7,category:m},t=y;var g=[];var k={},u=k;var D=`<h1 id="tree-component" class="ngde">Tree Component<a title="Link to heading" class="ng-doc-header-link ngde" href="/demo-walkthrough/tree-component#tree-component"><ng-doc-icon icon="link-2" size="16" class="ngde"></ng-doc-icon></a></h1><p class="ngde">Now that we have the selectors defined, the next step is to pass them into our component(s) so they can be used.</p><p class="ngde">Each of our routes have a smart component that looks basically the same. So, once again, we'll look at the <code class="ngde">Tree (Standard)</code> page to illustrate how we use the selectors and how we only retrieve the data we need as it is needed.</p><h2 id="smart-component" class="ngde">Smart Component<a title="Link to heading" class="ng-doc-header-link ngde" href="/demo-walkthrough/tree-component#smart-component"><ng-doc-icon icon="link-2" size="16" class="ngde"></ng-doc-icon></a></h2><p class="ngde">At the route level, we create a smart component that retrieves the data from the selectors that we need.</p><p class="ngde">The three selectors we need to pull our data from are, <code class="ngde">selectLocations()</code>, <code class="ngde">selectCurrentLocationId()</code>, and <code class="ngde">selectCurrentLocation()</code>. The code is as you would expect and can be found in the <a href="https://github.com/DaveMBush/SmartNgRX/blob/main/apps/demo/src/app/routes/tree-standard/tree.component.ts" class="ngde">tree.component.ts</a> file.</p><p class="ngde">You can look in the <code class="ngde">ngOnInit()</code> method to see that we retrieve the data and set them to member variables.</p><p class="ngde">Next, we <a href="https://github.com/DaveMBush/SmartNgRX/blob/main/apps/demo/src/app/routes/tree-standard/tree.component.html" class="ngde">pass the data into our main <code class="ngde">TreeComponent</code></a> which is a dumb component that is responsible for displaying the data.</p><p class="ngde"><code class="ngde">locations</code> and <code class="ngde">locationId</code> are used to populate the dropdown that allows us to pick the current location. The <code class="ngde">location</code> is used to retrieve the data for the tree. Let's take a look at that next. The dropdown selector is relatively straightforward, so there is no real need to look at that in detail.</p><h2 id="dumb-component" class="ngde">Dumb Component<a title="Link to heading" class="ng-doc-header-link ngde" href="/demo-walkthrough/tree-component#dumb-component"><ng-doc-icon icon="link-2" size="16" class="ngde"></ng-doc-icon></a></h2><p class="ngde">The common <a href="https://github.com/DaveMBush/SmartNgRX/blob/main/apps/demo/src/app/shared/components/tree/tree.component.html" class="ngde">TreeComponent</a> is used to display the tree. You should notice that it is using the <a href="https://material.angular.io/cdk/scrolling/overview" class="ngde">cdk-virtual-scroll-viewport</a> to provide virtual scrolling. This means that only the data that can be "seen" on the screen is rendered onto the screen. The tree uses the <a href="https://material.angular.io/components/tree/overview" class="ngde">mat-tree component</a> to display the data using the <a href="https://material.angular.io/components/tree/overview#flat-tree" class="ngde">flat data</a> method. This means that we need to convert our hierarchy of data into a flat list of data which we primarily do in <a href="https://github.com/DaveMBush/SmartNgRX/blob/main/apps/demo/src/app/shared/components/tree/tree-component.service.ts#L35-L48" class="ngde">TreeComponentService.applyRange()</a> and <a href="https://github.com/DaveMBush/SmartNgRX/blob/main/apps/demo/src/app/shared/components/tree/tree-component.service.ts#L50-L87" class="ngde">TreeComponentService.transform()</a></p><p class="ngde"><code class="ngde">applyRange()</code> is responsible for kicking things off by determining which rows of information we need to display. It then calls <code class="ngde">transform()</code> to convert the data from <code class="ngde">locations</code> into a flat list of tree data.</p><p class="ngde">Converting the nested data into a flat list is standard <code class="ngde">mat-tree</code> code so, again, we won't spend a lot of time on this. However, what is interesting about this code is that we avoid triggering retrieval of the data by accessing the <a href="https://github.com/DaveMBush/SmartNgRX/blob/main/apps/demo/src/app/shared/components/tree/tree-component.service.ts#L60" class="ngde">rawArray field</a> from the child data. It isn't until we know we need the data from that position <a href="https://github.com/DaveMBush/SmartNgRX/blob/main/apps/demo/src/app/shared/components/tree/tree-component.service.ts#L62-L64" class="ngde">that we retrieve it</a>.</p><p class="ngde">And this is the magic of SmartNgRX. Once you retrieve the data directly from the element, SmartNgRX ends up calling the Effects Service you registered and retrieves the data from the server.</p><p class="ngde">You'll also note that the <code class="ngde">transform()</code> method is <a href="https://github.com/DaveMBush/SmartNgRX/blob/main/apps/demo/src/app/shared/components/tree/tree-component.service.ts#L77-L82" class="ngde">recursive</a>.</p>`,N=(()=>{let e=class e extends n{constructor(){super(),this.routePrefix="",this.pageType="guide",this.pageContent=D,this.page=t,this.demoAssets=u}};e.\u0275fac=function(a){return new(a||e)},e.\u0275cmp=c({type:e,selectors:[["ng-doc-page-demo-walkthrough-tree-component"]],standalone:!0,features:[h([{provide:n,useExisting:e},g,t.providers??[]]),d,p],decls:1,vars:0,template:function(a,C){a&1&&i(0,"ng-doc-page")},dependencies:[l],encapsulation:2,changeDetection:0});let o=e;return o})(),R=[r(s({},(0,f.isRoute)(t.route)?t.route:{}),{path:"",component:N,title:"Tree Component"})],E=R;export{N as DynamicComponent,E as default};
