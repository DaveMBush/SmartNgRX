import{a as h}from"./chunk-NCOWMHCX.js";import{a as g}from"./chunk-TD4XB5UG.js";import"./chunk-NGTZT3PE.js";import{a as t}from"./chunk-MHNQVTJN.js";import{L as o,Qa as r,Ra as d,Ub as x,ia as c,va as p}from"./chunk-3EY2YW7E.js";import{a as i,b as l,g as f}from"./chunk-JPKLQMV2.js";var m=f(x());var w={title:"Using With Existing Selectors",mdFile:"./index.md",order:11,category:h},e=w;var u=[];var S={},y=S;var R=`<h1 id="using-with-existing-selectors" class="ngde">Using With Existing Selectors<a title="Link to heading" class="ng-doc-header-link ngde" href="/using-smart-ng-rx/using-with-existing-selectors#using-with-existing-selectors"><ng-doc-icon icon="link-2" size="16" class="ngde"></ng-doc-icon></a></h1><p class="ngde">You may have noticed that <code class="ngde ng-doc-code-with-link" class="ngde"><a href="/api/smart-ngrx/functions/createSmartSelector" class="ng-doc-code-anchor ngde" data-link-type="Function" class="ngde">createSmartSelector</a></code> only accepts a parent selector that returns an entity type. But what if you have existing selectors you need to integrate with SmartNgRX that return a different type?</p><p class="ngde">For this, you'll need an adapter function that converts the output of your existing selector to the entity type. Here's an example:</p><pre class="ngde hljs"><code class="hljs language-typescript code-lines ngde" lang="typescript" name="" icon="" highlightedlines="[]"><span class="line ngde"><span class="hljs-keyword ngde">export</span> <span class="hljs-keyword ngde">function</span> createRowsToEntitySelector&#x3C;<span class="hljs-title class_ ngde">RowType</span> <span class="hljs-keyword ngde">extends</span> <span class="hljs-built_in ngde">object</span>>(
</span><span class="line ngde">  <span class="hljs-attr ngde">originalSelector</span>: <span class="hljs-title class_ ngde">MemoizedSelector</span>&#x3C;<span class="hljs-built_in ngde">object</span>, <span class="hljs-title class_ ngde">RowType</span>[]>, <span class="hljs-attr ngde">idField</span>: <span class="hljs-built_in ngde">string</span>):
</span><span class="line ngde">    <span class="hljs-title class_ ngde">MemoizedSelector</span>&#x3C;<span class="hljs-built_in ngde">object</span>, <span class="hljs-title class_ ngde">EntityState</span>&#x3C;<span class="hljs-title class_ ngde">RowType</span>>, <span class="hljs-function ngde">(<span class="hljs-params ngde">s1: RowType[]</span>) =></span>
</span><span class="line ngde">      <span class="hljs-title class_ ngde">EntityState</span>&#x3C;<span class="hljs-title class_ ngde">RowType</span>>> {
</span><span class="line ngde">  <span class="hljs-keyword ngde">const</span> <span class="hljs-attr ngde">emptyEntityState</span>: <span class="hljs-title class_ ngde">EntityState</span>&#x3C;<span class="hljs-title class_ ngde">RowType</span>> = { <span class="hljs-attr ngde">ids</span>: [], <span class="hljs-attr ngde">entities</span>: {} };
</span><span class="line ngde">  <span class="hljs-keyword ngde">return</span> <span class="hljs-title function_ ngde">createSelector</span>(originalSelector, <span class="hljs-function ngde">(<span class="hljs-params ngde">rows: RowType[]</span>) =></span>
</span><span class="line ngde">    rows.<span class="hljs-property ngde">reduce</span>&#x3C;<span class="hljs-title class_ ngde">EntityState</span>&#x3C;<span class="hljs-title class_ ngde">RowType</span>>>(<span class="hljs-function ngde">(<span class="hljs-params ngde">acc, row</span>) =></span> {
</span><span class="line ngde">      <span class="hljs-keyword ngde">const</span> id = <a href="/api/smart-ngrx/functions/castTo" class="ng-doc-code-anchor ngde" data-link-type="Function" class="ngde">castTo</a>&#x3C;<span class="hljs-title class_ ngde">Dictionary</span>&#x3C;<span class="hljs-built_in ngde">number</span> | <span class="hljs-built_in ngde">string</span>>>(row)[idField]!;
</span><span class="line ngde">      <span class="hljs-keyword ngde">return</span> { <span class="hljs-attr ngde">ids</span>: [...acc.<span class="hljs-property ngde">ids</span>, id], <span class="hljs-attr ngde">entities</span>: { ...acc.<span class="hljs-property ngde">entities</span>, [id]: row } }
</span><span class="line ngde">        <span class="hljs-keyword ngde">as</span> <span class="hljs-title class_ ngde">EntityState</span>&#x3C;<span class="hljs-title class_ ngde">RowType</span>>;
</span><span class="line ngde">    }, emptyEntityState)
</span><span class="line ngde">  );
</span><span class="line ngde">}
</span></code></pre><p class="ngde">There are other ways you might achieve your goals, but this is a simple and effective way of creating a reusable adapter function that you can use to convert any selector that returns an array of objects to an entity state.</p><p class="ngde">This assumes the rows you are passing in are flat other than the child arrays which should ONLY be string arrays. If you have nested objects or arrays, you can still use this function but only the row itself and child array items as expected by SmartNgRX will be something you can use as though it were a SmartNgRX entity.</p><p class="ngde">If your current data is nested, you might consider using a library like Normalizr (unmaintained) or <a href="https://alternativeto.net/software/normalizr/" class="ngde">one of the alternatives</a> to flatten your data.</p><p class="ngde">You may need to adjust the function to suit your specific needs which is why we have not included this adapter in the library itself.</p>`,_=(()=>{let s=class s extends t{constructor(){super(),this.routePrefix="",this.pageType="guide",this.pageContent=R,this.editSourceFileUrl="https://github.com/DaveMBush/SmartNgRX/edit/main/apps/documentation/src/app/using-smart-ng-rx/using-with-existing-selectors/index.md?message=docs(using-with-existing-selectors): describe your changes here...",this.page=e,this.demoAssets=y}};s.\u0275fac=function(a){return new(a||s)},s.\u0275cmp=o({type:s,selectors:[["ng-doc-page-using-smart-ng-rx-using-with-existing-selectors"]],standalone:!0,features:[r([{provide:t,useExisting:s},u,e.providers??[]]),c,d],decls:1,vars:0,template:function(a,C){a&1&&p(0,"ng-doc-page")},dependencies:[g],encapsulation:2,changeDetection:0});let n=s;return n})(),b=[l(i({},(0,m.isRoute)(e.route)?e.route:{}),{path:"",component:_,title:"Using With Existing Selectors"})],A=b;export{_ as DynamicComponent,A as default};
