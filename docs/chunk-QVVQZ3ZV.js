import{a as l}from"./chunk-MMZV4BMI.js";import{a as p}from"./chunk-ICC3I7U3.js";import"./chunk-3NO74SQX.js";import"./chunk-A7763QJH.js";import{a as t}from"./chunk-JHHDKBNU.js";import{X as D}from"./chunk-4NKWSBMZ.js";import"./chunk-PTJD77X5.js";import{Pa as d,S as c,lb as g,mb as h,za as i}from"./chunk-UDQB7DFD.js";import{a,b as r,h as w}from"./chunk-TWZW5B45.js";var f=w(D());var N={title:"Processing WebSocket Messages",mdFile:"./index.md",order:11,category:l},e=N;var m=[];var k={},u=k;var v=`<h1 id="processing-websocket-messages" href="demo-walkthrough/processing-websocket-messages" headinglink="true" class="ngde">Processing WebSocket Messages<ng-doc-heading-anchor class="ng-doc-anchor ngde" anchor="processing-websocket-messages"></ng-doc-heading-anchor></h1><p class="ngde">The demo makes use of socket.io to send messages from the server and process them on the client. You may choose whatever framework you want, or none at all.</p><h2 id="server-side" href="demo-walkthrough/processing-websocket-messages" headinglink="true" class="ngde">Server Side<ng-doc-heading-anchor class="ng-doc-anchor ngde" anchor="server-side"></ng-doc-heading-anchor></h2><p class="ngde">On the server side, we send messages to the client when a row changes. Some examples you can look at include:</p><ul class="ngde"><li class="ngde"><a href="https://github.com/DaveMBush/SmartNgRX/blob/v-next/apps/server/src/app/departments/department.controller.ts#L51-L55" class="ngde">Sending a message when a row has been updated</a>.</li><li class="ngde"><a href="https://github.com/DaveMBush/SmartNgRX/blob/v-next/apps/server/src/app/departments/department.controller.ts#L89-L93" class="ngde">Sending a message when a row has been added</a></li><li class="ngde"><a href="https://github.com/DaveMBush/SmartNgRX/blob/v-next/apps/server/src/app/departments/department.controller.ts#L103-L107" class="ngde">Sending a message when a row has been deleted</a></li></ul><h3 id="some-things-to-note" href="demo-walkthrough/processing-websocket-messages" headinglink="true" class="ngde">Some things to note<ng-doc-heading-anchor class="ng-doc-anchor ngde" anchor="some-things-to-note"></ng-doc-heading-anchor></h3><p class="ngde">When we send a notification for an add, we send an <code class="ngde">update</code> notification for the parent row. This is because we want the parent's child field array to be updated with the current lists of child IDs.</p><p class="ngde">When we send a notification for delete, we send a <code class="ngde">delete</code> notification because SmartNgRX is the best place to determine all the locations that need to be updated.</p><h2 id="client-side" href="demo-walkthrough/processing-websocket-messages" headinglink="true" class="ngde">Client Side<ng-doc-heading-anchor class="ng-doc-anchor ngde" anchor="client-side"></ng-doc-heading-anchor></h2><p class="ngde">On the client side, we listen for the messages in one location and pass the information down to SmartNgRX to process.</p><p class="ngde">The main listener code is in <a href="https://github.com/DaveMBush/SmartNgRX/blob/v-next/apps/demo/src/app/shared/socket.service.ts" class="ngde">socket.service.ts</a></p><p class="ngde">The one thing to note here is that because the server is sending notifications about the tables it knows about, we need to translate the <code class="ngde">docs</code>, <code class="ngde">lists</code>, <code class="ngde">folders</code>, and <code class="ngde">sprintFolders</code> tables to <code class="ngde">departmentChildren</code> so the client can process them correctly. But the main processing of the notification is all done by SmartNgRX in <a href="https://github.com/DaveMBush/SmartNgRX/blob/v-next/apps/demo/src/app/shared/socket.service.ts#L38" class="ngde">handleSocketNotification()</a></p>`,n=class s extends t{constructor(){super();this.pageType="guide";this.pageContent=v;this.editSourceFileUrl="https://github.com/DaveMBush/SmartNgRX/edit/main/apps/documentation/src/app/demo-walkthrough/processing-websocket-messages/index.md?message=docs(): describe your changes here...";this.viewSourceFileUrl="https://github.com/DaveMBush/SmartNgRX/blob/release/apps/documentation/src/app/demo-walkthrough/processing-websocket-messages/index.md";this.page=e;this.demoAssets=u}static{this.\u0275fac=function(o){return new(o||s)}}static{this.\u0275cmp=c({type:s,selectors:[["ng-doc-page-pfmrrmia"]],standalone:!0,features:[g([{provide:t,useExisting:s},m,e.providers??[]]),i,h],decls:1,vars:0,template:function(o,P){o&1&&d(0,"ng-doc-page")},dependencies:[p],encapsulation:2,changeDetection:0})}},S=[r(a({},(0,f.isRoute)(e.route)?e.route:{}),{path:"",component:n,title:"Processing WebSocket Messages"})],I=S;export{n as PageComponent,I as default};
