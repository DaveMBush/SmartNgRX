import{a as p}from"./chunk-MMZV4BMI.js";import{a as h}from"./chunk-ILHULVET.js";import"./chunk-QCRGZPLW.js";import"./chunk-NHVJC6EG.js";import{a as t}from"./chunk-3NJKGVAP.js";import{X as w}from"./chunk-QXTZ4AYG.js";import"./chunk-AACWRZT7.js";import{Ba as c,Fa as i,Wa as d,sb as g}from"./chunk-O44Q3Q27.js";import{a,b as r,h as b}from"./chunk-TWZW5B45.js";var u=b(w());var D={title:"Processing WebSocket Messages",mdFile:"./index.md",order:11,category:p},e=D;var l=[];var N={},m=N;var k=`<h1 id="processing-websocket-messages" href="demo-walkthrough/processing-websocket-messages" headinglink="true" class="ngde">Processing WebSocket Messages<ng-doc-heading-anchor class="ng-doc-anchor ngde" anchor="processing-websocket-messages"></ng-doc-heading-anchor></h1><p class="ngde">The demo makes use of socket.io to send messages from the server and process them on the client. You may choose whatever framework you want, or none at all.</p><h2 id="server-side" href="demo-walkthrough/processing-websocket-messages" headinglink="true" class="ngde">Server Side<ng-doc-heading-anchor class="ng-doc-anchor ngde" anchor="server-side"></ng-doc-heading-anchor></h2><p class="ngde">On the server side, we send messages to the client when a row changes. Some examples you can look at include:</p><ul class="ngde"><li class="ngde"><a href="https://github.com/DaveMBush/SmartNgRX/blob/v-next/apps/server/src/app/departments/department.controller.ts#L51-L55" class="ngde">Sending a message when a row has been updated</a>.</li><li class="ngde"><a href="https://github.com/DaveMBush/SmartNgRX/blob/v-next/apps/server/src/app/departments/department.controller.ts#L89-L93" class="ngde">Sending a message when a row has been added</a></li><li class="ngde"><a href="https://github.com/DaveMBush/SmartNgRX/blob/v-next/apps/server/src/app/departments/department.controller.ts#L103-L107" class="ngde">Sending a message when a row has been deleted</a></li></ul><h3 id="some-things-to-note" href="demo-walkthrough/processing-websocket-messages" headinglink="true" class="ngde">Some things to note<ng-doc-heading-anchor class="ng-doc-anchor ngde" anchor="some-things-to-note"></ng-doc-heading-anchor></h3><p class="ngde">When we send a notification for an add, we send an <code class="ngde">update</code> notification for the parent row. This is because we want the parent's child field array to be updated with the current lists of child IDs.</p><p class="ngde">When we send a notification for delete, we send a <code class="ngde">delete</code> notification because SmartNgRX is the best place to determine all the locations that need to be updated.</p><h2 id="client-side" href="demo-walkthrough/processing-websocket-messages" headinglink="true" class="ngde">Client Side<ng-doc-heading-anchor class="ng-doc-anchor ngde" anchor="client-side"></ng-doc-heading-anchor></h2><p class="ngde">On the client side, we listen for the messages in one location and pass the information down to SmartNgRX to process.</p><p class="ngde">The main listener code is in <a href="https://github.com/DaveMBush/SmartNgRX/blob/v-next/apps/demo/src/app/shared/socket.service.ts" class="ngde">socket.service.ts</a></p><p class="ngde">The one thing to note here is that because the server is sending notifications about the tables it knows about, we need to translate the <code class="ngde">docs</code>, <code class="ngde">lists</code>, <code class="ngde">folders</code>, and <code class="ngde">sprintFolders</code> tables to <code class="ngde">departmentChildren</code> so the client can process them correctly. But the main processing of the notification is all done by SmartNgRX in <a href="https://github.com/DaveMBush/SmartNgRX/blob/v-next/apps/demo/src/app/shared/socket.service.ts#L38" class="ngde">handleSocketNotification()</a></p>`,n=class s extends t{constructor(){super();this.pageType="guide";this.pageContent=k;this.editSourceFileUrl="https://github.com/DaveMBush/SmartNgRX/edit/main/apps/documentation/src/app/demo-walkthrough/processing-websocket-messages/index.md?message=docs(): describe your changes here...";this.viewSourceFileUrl="https://github.com/DaveMBush/SmartNgRX/blob/release/apps/documentation/src/app/demo-walkthrough/processing-websocket-messages/index.md";this.page=e;this.demoAssets=m}static{this.\u0275fac=function(o){return new(o||s)}}static{this.\u0275cmp=c({type:s,selectors:[["ng-doc-page-o73rtj3d"]],features:[g([{provide:t,useExisting:s},l,e.providers??[]]),i],decls:1,vars:0,template:function(o,y){o&1&&d(0,"ng-doc-page")},dependencies:[h],encapsulation:2,changeDetection:0})}},v=[r(a({},(0,u.isRoute)(e.route)?e.route:{}),{path:"",component:n,title:"Processing WebSocket Messages"})],U=v;export{n as PageComponent,U as default};
