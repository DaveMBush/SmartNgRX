import{a as p}from"./chunk-65QNGUSK.js";import"./chunk-T4WX5D76.js";import"./chunk-3FR5PQZO.js";import{a as g}from"./chunk-C5SIYBOV.js";import{a as o}from"./chunk-LSIHCBJT.js";import{X as u}from"./chunk-CQLVC7LO.js";import"./chunk-PZEHRWLK.js";import{Qa as c,pb as d,ta as r,xa as i}from"./chunk-JNJDPWAB.js";import{a as t,b as l,h as m}from"./chunk-TWZW5B45.js";var B=m(u());var F={title:"Top Level Selectors",mdFile:"./index.md",order:9,category:g},e=F;var h=[];var D={},k=D;var f=`<h1 id="top-level-selectors" href="using-smart-ng-rx/top-level-selectors" headinglink="true" class="ngde">Top Level Selectors<ng-doc-heading-anchor class="ng-doc-anchor ngde" anchor="top-level-selectors"></ng-doc-heading-anchor></h1><p class="ngde">In the discussion about <a href="using-smart-ng-rx/entity-definitions" class="ngde">Entity Definitions</a>, we briefly mentioned the optional field <code class="ngde">isInitialRow</code>. Also known as a top level row.</p><p class="ngde">Here's the problem we are solving with top level rows. Most of SmartNgRX assumes that every row could have child rows. But the quandary we have is, how do we get our initial set of children? This is what our top level rows are for.</p><p class="ngde">To set this up, you'll need to configure the Entity Definition for the table using <code class="ngde">isInitialRow</code> set to <code class="ngde">true</code>.</p><p class="ngde">Then you'll need to setup some selectors.</p><p class="ngde">The first selector you'll need to setup allows you to gain access to the top level selector in a way that will allow us to automatically fetch the data when we try to access the first and only row.</p><pre class="shiki shiki-themes github-light ayu-dark" style="background-color:#fff;--shiki-dark-bg:#0b0e14;color:#24292e;--shiki-dark:#bfbdb6" tabindex="0"><code class="language-typescript"><span class="line"><span style="color:#D73A49;--shiki-dark:#FF8F40" class="ngde">export</span><span style="color:#D73A49;--shiki-dark:#FF8F40" class="ngde"> const</span><span style="color:#005CC5;--shiki-dark:#BFBDB6" class="ngde"> selectTopEntities</span><span style="color:#D73A49;--shiki-dark:#F29668" class="ngde"> =</span><span style="color:#6F42C1;--shiki-dark:#FFB454" class="ngde"> <a href="smart-ngrx-api/functions/smart-ngrx-api/createSmartSelector" class="ng-doc-code-anchor ngde">createSmartSelector</a></span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">&#x3C;</span><span style="color:#6F42C1;--shiki-dark:#59C2FF" class="ngde">Top</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">>(</span><span style="color:#032F62;--shiki-dark:#AAD94C" class="ngde">'tree-standard'</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">,</span><span style="color:#032F62;--shiki-dark:#AAD94C" class="ngde"> 'top'</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">)</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">;</span></span></code></pre><p class="ngde">Where <code class="ngde">tree-standard</code> is the feature and <code class="ngde">top</code> is the name of the entity.</p><p class="ngde">To wire the top entity and the children to SmartNgRX, you'll use code similar to the following:</p><pre class="shiki shiki-themes github-light ayu-dark" style="background-color:#fff;--shiki-dark-bg:#0b0e14;color:#24292e;--shiki-dark:#bfbdb6" tabindex="0"><code class="language-typescript"><span class="line"><span style="color:#D73A49;--shiki-dark:#FF8F40" class="ngde">export</span><span style="color:#D73A49;--shiki-dark:#FF8F40" class="ngde"> const</span><span style="color:#005CC5;--shiki-dark:#BFBDB6" class="ngde"> selectTopLocations</span><span style="color:#D73A49;--shiki-dark:#F29668" class="ngde"> =</span><span style="color:#6F42C1;--shiki-dark:#FFB454" class="ngde"> <a href="smart-ngrx-api/functions/smart-ngrx-api/createSmartSelector" class="ng-doc-code-anchor ngde">createSmartSelector</a></span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">(selectTopEntities</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">,</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde"> [</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">  {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">    childFeature</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">:</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde"> featureName</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">    childEntity</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">:</span><span style="color:#032F62;--shiki-dark:#AAD94C" class="ngde"> 'locations'</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">    parentField</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">:</span><span style="color:#032F62;--shiki-dark:#AAD94C" class="ngde"> 'locations'</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">    parentFeature</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">:</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde"> featureName</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">    parentEntity</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">:</span><span style="color:#032F62;--shiki-dark:#AAD94C" class="ngde"> 'top'</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">    childSelector</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">:</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde"> selectLocationsDepartments</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">  }</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">])</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">;</span></span></code></pre><p class="ngde">This is typical smart selector code that defines the parent child relationship. In this case, 'top' refers to our top level entity that has only one row and 'locations' refers to, in this case, the children that are related to top. Keep in mind any parent can have no children or multiple children. The same is true here.</p><p class="ngde">We aren't quite done yet. Now we need a way to force the retrieval of the above two selectors so that we automatically retrieve the children. In this case, the locations.</p><p class="ngde">The following code does this for us.</p><pre class="shiki shiki-themes github-light ayu-dark" style="background-color:#fff;--shiki-dark-bg:#0b0e14;color:#24292e;--shiki-dark:#bfbdb6" tabindex="0"><code class="language-typescript"><span class="line"><span style="color:#D73A49;--shiki-dark:#FF8F40" class="ngde">export</span><span style="color:#D73A49;--shiki-dark:#FF8F40" class="ngde"> const</span><span style="color:#005CC5;--shiki-dark:#BFBDB6" class="ngde"> selectLocations</span><span style="color:#D73A49;--shiki-dark:#F29668" class="ngde"> =</span><span style="color:#6F42C1;--shiki-dark:#FFB454" class="ngde"> <a href="smart-ngrx-api/functions/smart-ngrx-api/getTopChildRows" class="ng-doc-code-anchor ngde">getTopChildRows</a></span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">&#x3C;</span><span style="color:#6F42C1;--shiki-dark:#59C2FF" class="ngde">Top</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">,</span><span style="color:#6F42C1;--shiki-dark:#59C2FF" class="ngde"> Location</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">>(selectTopLocations</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">,</span><span style="color:#032F62;--shiki-dark:#AAD94C" class="ngde"> 'locations'</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">)</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">;</span></span></code></pre><p class="ngde">If you are tracking along, you'll know that <code class="ngde">selectTopLocations</code> refers to the selector we just discussed. <code class="ngde">locations</code> refers to the child field in our top level entity. Under the hood, this code tries to access the one and only row that is in our top level entity. Because it doesn't exist, it will call the service the corresponds to our top level entity and will retrieve the one and only row. This has the child IDs and when we try to access them, SmartNgRX will turn them into rows for you automatically.</p>`,s=class s extends o{constructor(){super();this.pageType="guide";this.pageContent=f;this.editSourceFileUrl="https://github.com/DaveMBush/SmartNgRX/edit/main/apps/documentation/src/app/using-smart-ng-rx/top-level-selectors/index.md?message=docs(): describe your changes here...";this.viewSourceFileUrl="https://github.com/DaveMBush/SmartNgRX/blob/release/apps/documentation/src/app/using-smart-ng-rx/top-level-selectors/index.md";this.page=e;this.demoAssets=k}};s.\u0275fac=function(a){return new(a||s)},s.\u0275cmp=r({type:s,selectors:[["ng-doc-page-fkyjjl79"]],features:[d([{provide:o,useExisting:s},h,e.providers??[]]),i],decls:1,vars:0,template:function(a,C){a&1&&c(0,"ng-doc-page")},dependencies:[p],encapsulation:2,changeDetection:0});var n=s,E=[l(t({},(0,B.isRoute)(e.route)?e.route:{}),{path:"",component:n,title:"Top Level Selectors"})],X=E;export{n as PageComponent,X as default};
