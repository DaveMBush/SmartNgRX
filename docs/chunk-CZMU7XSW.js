import{a as p}from"./chunk-65QNGUSK.js";import"./chunk-T4WX5D76.js";import"./chunk-3FR5PQZO.js";import{a as g}from"./chunk-7ZOECJ3Y.js";import"./chunk-CDOWFHT3.js";import{a as n}from"./chunk-LSIHCBJT.js";import{X as B}from"./chunk-CQLVC7LO.js";import"./chunk-PZEHRWLK.js";import{Qa as c,pb as l,ta as i,xa as d}from"./chunk-JNJDPWAB.js";import{a as r,b as t,h as u}from"./chunk-TWZW5B45.js";var k=u(B());var f={title:"Create (Add) a Row",mdFile:"./index.md",order:4,category:g},e=f;var h=[];var D={},m=D;var F=`<h1 id="create-add-a-row" href="using-smart-signals/crud-support/create" headinglink="true" class="ngde">Create (Add) a Row<ng-doc-heading-anchor class="ng-doc-anchor ngde" anchor="create-add-a-row"></ng-doc-heading-anchor></h1><p class="ngde">By now, you should be familiar with the structure of SmartNgRX rows. A row can have zero or more children. The children are represented by a <code class="ngde ng-doc-code-with-link"><a href="smart-signals-api/interfaces/smart-signals-api/SmartArray" class="ng-doc-code-anchor ngde">SmartArray</a></code> object.</p><p class="ngde">There are two ways you might add a new row:</p><p class="ngde">If you need a row on the client that you can edit. For example, edit in place. You need to first call the <code class="ngde ng-doc-code-with-link"><a href="smart-signals-api/interfaces/smart-signals-api/SmartArray" class="ng-doc-code-anchor ngde">SmartArray</a></code>'s <code class="ngde">addToStore</code> method, which you can access from the <code class="ngde ng-doc-code-with-link"><a href="smart-signals-api/interfaces/smart-signals-api/SmartArray" class="ng-doc-code-anchor ngde">SmartArray</a></code> interface, passing it a dummy row you want to add, including a unique ID.</p><p class="ngde">Sample code from the demo app:</p><pre class="shiki shiki-themes github-light ayu-dark" style="background-color:#fff;--shiki-dark-bg:#0b0e14;color:#24292e;--shiki-dark:#bfbdb6" tabindex="0"><code class="language-typescript"><span class="line"><span style="color:#6F42C1;--shiki-dark:#FFB454" class="ngde">addChild</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">(row: DepartmentChild</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">,</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde"> parent: TreeNode): </span><span style="color:#D73A49;--shiki-dark:#F29668" class="ngde">void</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#FF8F40" class="ngde">  if</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde"> (parent</span><span style="color:#24292E;--shiki-dark:#F29668" class="ngde">.</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">isExpanded </span><span style="color:#D73A49;--shiki-dark:#F29668" class="ngde">===</span><span style="color:#005CC5;--shiki-dark:#D2A6FF" class="ngde"> false</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">) {</span></span>
<span class="line"><span style="color:#005CC5;--shiki-dark:#39BAE6;font-style:inherit;--shiki-dark-font-style:italic" class="ngde">    this</span><span style="color:#24292E;--shiki-dark:#F29668" class="ngde">.</span><span style="color:#6F42C1;--shiki-dark:#FFB454" class="ngde">toggleExpand</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">(parent)</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">  parent</span><span style="color:#24292E;--shiki-dark:#F29668" class="ngde">.</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">node</span><span style="color:#24292E;--shiki-dark:#F29668" class="ngde">.</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">children</span><span style="color:#24292E;--shiki-dark:#F29668" class="ngde">.</span><span style="color:#6F42C1;--shiki-dark:#FFB454" class="ngde">addToStore</span><span style="color:#D73A49;--shiki-dark:#F29668" class="ngde">!</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">(row</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">,</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde"> parent</span><span style="color:#24292E;--shiki-dark:#F29668" class="ngde">.</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">node)</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">}</span></span></code></pre><p class="ngde">At this point, the row is in the store, and you can edit it like you would edit an already existing row. The only difference is that the row is not yet on the server.</p><p class="ngde">To save the row to the server, you update the row in the same way you would update any other row. The system is smart enough to know that the row is new and will ultimately call the <code class="ngde">add</code> method in the corresponding <code class="ngde ng-doc-code-with-link"><a href="smart-signals-api/classes/smart-signals-api/EffectService" class="ng-doc-code-anchor ngde">EffectService</a></code>.</p><p class="ngde">To remove a row that has not been saved to the server yet, you would call the <code class="ngde ng-doc-code-with-link"><a href="smart-signals-api/interfaces/smart-signals-api/SmartArray" class="ng-doc-code-anchor ngde">SmartArray</a></code>'s <code class="ngde">removeFromStore</code> method. This will remove the row from the store and the ID from the array.</p><p class="ngde">You can also add a row by calling the <code class="ngde ng-doc-code-with-link"><a href="smart-signals-api/interfaces/smart-signals-api/SmartArray" class="ng-doc-code-anchor ngde">SmartArray</a></code>'s <code class="ngde">add</code> method. This will add the row directly to the server as well as adding it to the store.</p><h2 id="storing-to-the-server" href="using-smart-signals/crud-support/create" headinglink="true" class="ngde">Storing to the Server<ng-doc-heading-anchor class="ng-doc-anchor ngde" anchor="storing-to-the-server"></ng-doc-heading-anchor></h2><p class="ngde">Once again, SmartNgRX ends up calling your <code class="ngde ng-doc-code-with-link"><a href="smart-signals-api/classes/smart-signals-api/EffectService" class="ng-doc-code-anchor ngde">EffectService</a></code> class to store the data to the server.</p><pre class="shiki shiki-themes github-light ayu-dark" style="background-color:#fff;--shiki-dark-bg:#0b0e14;color:#24292e;--shiki-dark:#bfbdb6" tabindex="0"><code class="language-typescript"><span class="line"><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">override </span><span style="color:#6F42C1;--shiki-dark:#FFB454" class="ngde">add</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">(row: DepartmentChild): Observable</span><span style="color:#D73A49;--shiki-dark:#F29668" class="ngde">&#x3C;</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">DepartmentChild[]</span><span style="color:#D73A49;--shiki-dark:#F29668" class="ngde">></span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde"> {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">  return this.http.post&#x3C;DepartmentChild[]>(this.apiDepartments, row);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">}</span></span></code></pre><p class="ngde">If the <code class="ngde">add()</code> fails, SmartNgRX is smart enough to rollback the update in the store.</p>`,s=class s extends n{constructor(){super();this.pageType="guide";this.pageContent=F;this.editSourceFileUrl="https://github.com/DaveMBush/SmartNgRX/edit/main/apps/documentation/src/app/using-smart-signals/crud-support/create/index.md?message=docs(): describe your changes here...";this.viewSourceFileUrl="https://github.com/DaveMBush/SmartNgRX/blob/release/apps/documentation/src/app/using-smart-signals/crud-support/create/index.md";this.page=e;this.demoAssets=m}};s.\u0275fac=function(a){return new(a||s)},s.\u0275cmp=i({type:s,selectors:[["ng-doc-page-lv0xf6mi"]],features:[l([{provide:n,useExisting:s},h,e.providers??[]]),d],decls:1,vars:0,template:function(a,C){a&1&&c(0,"ng-doc-page")},dependencies:[p],encapsulation:2,changeDetection:0});var o=s,w=[t(r({},(0,k.isRoute)(e.route)?e.route:{}),{path:"",component:o,title:"Create (Add) a Row"})],X=w;export{o as PageComponent,X as default};
