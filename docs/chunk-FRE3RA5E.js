import{a as p}from"./chunk-3VZM5QD4.js";import{a as g}from"./chunk-TD4XB5UG.js";import"./chunk-NGTZT3PE.js";import{a}from"./chunk-MHNQVTJN.js";import{L as c,Qa as l,Ra as h,Ub as v,ia as i,va as d}from"./chunk-3EY2YW7E.js";import{a as n,b as r,g as k}from"./chunk-JPKLQMV2.js";var f=k(v());var y={title:"Selectors",mdFile:"./index.md",order:6,category:p},t=y;var u=[];var D={},m=D;var S=`<h1 id="selectors" class="ngde">Selectors<a title="Link to heading" class="ng-doc-header-link ngde" href="/demo-walkthrough/selectors#selectors"><ng-doc-icon icon="link-2" size="16" class="ngde"></ng-doc-icon></a></h1><p class="ngde">From an NgRX perspective, once you've configured your global provider and your feature providers, and created the Effects Services to retrieve your data, the only NgRX thing you'll need to concern yourself with are the selectors. And, even these aren't quite what you are used to because we've abstracted them as well. You'll never create an Effect, Action or Reducer for CRUD operations again. You'll still need to use standard NgRX for other state management tasks, such as storing form data like we do in the demo application to store the currently selected location.</p><p class="ngde">We won't go into much detail here because this is standard NgRX code. But you can see the current location actions, effects, and reducers in any of the <a href="https://github.com/DaveMBush/SmartNgRX/tree/main/apps/demo/src/app/routes/tree-standard/store/current-location" class="ngde">current-location</a> folders.</p><p class="ngde">One thing we will point out that might look strange to some of you is that we use an effect to listen for new data being set for the locations so we can determine a default action when new data comes in as a way to get around a problem we've had with the Angular Material mat-selector. It exists simply to delay setting the current location.</p><p class="ngde">Since all of our selectors look the same except for the feature store they are getting the data from, we'll focus our time on the selectors for the <a href="https://github.com/DaveMBush/SmartNgRX/tree/main/apps/demo/src/app/routes/tree-standard" class="ngde">Tree (Standard)</a> page.</p><h2 id="feature-selectors" class="ngde">Feature Selectors<a title="Link to heading" class="ng-doc-header-link ngde" href="/demo-walkthrough/selectors#feature-selectors"><ng-doc-icon icon="link-2" size="16" class="ngde"></ng-doc-icon></a></h2><p class="ngde">All our feature selectors for a route are located in the same file. This doesn't have to be the case, we've just decided to group them like this.</p><p class="ngde"><a href="https://github.com/DaveMBush/SmartNgRX/blob/main/apps/demo/src/app/routes/tree-standard/store/tree-standard-state.selectors.ts" class="ngde">tree-standard-state.selectors.ts</a> is where you'll find the feature selectors for the Tree (Standard) page. Notice there are two. One for the state that uses standard NgRX and one for the state that uses SmartNgRX.</p><h2 id="top-selectors" class="ngde">Top Selectors<a title="Link to heading" class="ng-doc-header-link ngde" href="/demo-walkthrough/selectors#top-selectors"><ng-doc-icon icon="link-2" size="16" class="ngde"></ng-doc-icon></a></h2><p class="ngde">The main selector in our <a href="https://github.com/DaveMBush/SmartNgRX/blob/main/apps/demo/src/app/routes/tree-standard/store/top/top.selector.ts" class="ngde">top.selector.ts</a> file is <code class="ngde">selectTopLocations()</code> you'll see that it uses <code class="ngde">selectTopEntities()</code> as the first parameter which is used to retrieve the top entity slice from the feature. The second parameter is the array of <code class="ngde ng-doc-code-with-link" class="ngde"><a href="/api/smart-ngrx/interfaces/ChildDefinition" class="ng-doc-code-anchor ngde" data-link-type="Interface" class="ngde">ChildDefinition</a></code>s which has just one item because the list of IDs we will use to retrieve the locations is the <code class="ngde">locations</code> field.</p><p class="ngde">While not technically a top selector item, the last selector in this file is <code class="ngde">selectLocation()</code> which is used to retrieve the location IDs from the return value of <code class="ngde">selectTopLocations()</code>.</p><h2 id="current-location-selectors" class="ngde">Current Location Selectors<a title="Link to heading" class="ng-doc-header-link ngde" href="/demo-walkthrough/selectors#current-location-selectors"><ng-doc-icon icon="link-2" size="16" class="ngde"></ng-doc-icon></a></h2><p class="ngde">The <a href="https://github.com/DaveMBush/SmartNgRX/blob/main/apps/demo/src/app/routes/tree-standard/store/current-location/current-location.selector.ts" class="ngde">current-location.selectors.ts</a> simply pulls out the currently selected location ID from the state.</p><h2 id="location-selectors" class="ngde">Location Selectors<a title="Link to heading" class="ng-doc-header-link ngde" href="/demo-walkthrough/selectors#location-selectors"><ng-doc-icon icon="link-2" size="16" class="ngde"></ng-doc-icon></a></h2><p class="ngde">The <a href="https://github.com/DaveMBush/SmartNgRX/blob/main/apps/demo/src/app/routes/tree-standard/store/locations/location.selectors.ts" class="ngde">location.selectors.ts</a> holds selectors that will give us access to the locations and the selected location.</p><p class="ngde">Once again, we see our <code class="ngde">createSmartSelector()</code> being used to retrieve the locations and the children of the locations. In this case, the departments. It takes our <code class="ngde">selectLocationEntities()</code> as the first parameter and the array of <code class="ngde">ChildDefinion</code>s as the second parameter.</p><p class="ngde">The other select we need here is the one that provides the currently selected location. This standard NgRX selector uses the <code class="ngde">selectLocationDepartments()</code> and <code class="ngde">selectCurrentLocationId()</code> we've already covered as parameter and then uses those to return the selected location, if it exists. Otherwise it returns a default location that has no departments.</p><h2 id="department-selectors" class="ngde">Department Selectors<a title="Link to heading" class="ng-doc-header-link ngde" href="/demo-walkthrough/selectors#department-selectors"><ng-doc-icon icon="link-2" size="16" class="ngde"></ng-doc-icon></a></h2><p class="ngde">And so we continue down the stack and everything starts to look the same. The <a href="https://github.com/DaveMBush/SmartNgRX/blob/main/apps/demo/src/app/routes/tree-standard/store/department/department.selector.ts" class="ngde">department.selectors.ts</a> file has the <code class="ngde">selectDepartments()</code> selector that is used to retrieve the department entities and the <code class="ngde">selectDepartmentsChildren()</code> select that is used to define how to access the department children.</p><h2 id="department-children-selectors" class="ngde">Department Children Selectors<a title="Link to heading" class="ng-doc-header-link ngde" href="/demo-walkthrough/selectors#department-children-selectors"><ng-doc-icon icon="link-2" size="16" class="ngde"></ng-doc-icon></a></h2><p class="ngde">And finally we come to the bottom of the tree where the only thing left to do is to select the <a href="https://github.com/DaveMBush/SmartNgRX/blob/main/apps/demo/src/app/routes/tree-standard/store/department-children/department-child.selector.ts" class="ngde">department children</a>.</p><h2 id="conclusion" class="ngde">Conclusion<a title="Link to heading" class="ng-doc-header-link ngde" href="/demo-walkthrough/selectors#conclusion"><ng-doc-icon icon="link-2" size="16" class="ngde"></ng-doc-icon></a></h2><p class="ngde">Notice how coming from the top, we combine selectors until we've retrieved all the data we need to create the tree. Next, we'll show how we only retrieve the data we need as it is needed. This is one of the main features of SmartNgRX. We don't retrieve everything all at once.</p>`,b=(()=>{let e=class e extends a{constructor(){super(),this.routePrefix="",this.pageType="guide",this.pageContent=S,this.editSourceFileUrl="https://github.com/DaveMBush/SmartNgRX/edit/main/apps/documentation/src/app/demo-walkthrough/selectors/index.md?message=docs(selectors): describe your changes here...",this.page=t,this.demoAssets=m}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=c({type:e,selectors:[["ng-doc-page-demo-walkthrough-selectors"]],standalone:!0,features:[l([{provide:a,useExisting:e},u,t.providers??[]]),i,h],decls:1,vars:0,template:function(o,R){o&1&&d(0,"ng-doc-page")},dependencies:[g],encapsulation:2,changeDetection:0});let s=e;return s})(),N=[r(n({},(0,f.isRoute)(t.route)?t.route:{}),{path:"",component:b,title:"Selectors"})],B=N;export{b as DynamicComponent,B as default};
