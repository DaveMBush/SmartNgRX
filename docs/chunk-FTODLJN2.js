import{a as h}from"./chunk-CG3MNAEL.js";import"./chunk-3FR5PQZO.js";import"./chunk-T4WX5D76.js";import{a as g}from"./chunk-CCBDXPMP.js";import{a as s}from"./chunk-LSIHCBJT.js";import"./chunk-PZEHRWLK.js";import{X as y}from"./chunk-CQLVC7LO.js";import{Qa as d,pb as l,ta as c,xa as i}from"./chunk-JNJDPWAB.js";import{a as r,b as n,h as w}from"./chunk-TWZW5B45.js";var u=w(y());var D={title:"Selectors",mdFile:"./index.md",order:6,category:g},t=D;var p=[];var N={},m=N;var v=`<h1 id="selectors" href="ngrx-demo-walkthrough/selectors" headinglink="true" class="ngde">Selectors<ng-doc-heading-anchor class="ng-doc-anchor ngde" anchor="selectors"></ng-doc-heading-anchor></h1><p class="ngde">From an NgRX perspective, once you've configured your global provider and your feature providers, and created the Effects Services to retrieve your data, the only NgRX thing you'll need to concern yourself with are the selectors. And, even these aren't quite what you are used to because we've abstracted them as well. You'll never create an Effect, Action or Reducer for CRUD operations again. You'll still need to use standard NgRX for other state management tasks, such as storing form data like we do in the demo application to store the currently selected location.</p><p class="ngde">We won't go into much detail here because this is standard NgRX code. But you can see the current location actions, effects, and reducers in any of the <a href="https://github.com/DaveMBush/SmartNgRX/blob/main/apps/demo-ngrx-classic/src/app/routes/tree-standard/store/current-location" class="ngde">current-location</a> folders.</p><p class="ngde">One thing we will point out that might look strange to some of you is that we use an effect to listen for new data being set for the locations so we can determine a default action when new data comes in as a way to get around a problem we've had with the Angular Material mat-selector. It exists simply to delay setting the current location.</p><p class="ngde">Since all of our selectors look the same except for the feature store they are getting the data from, we'll focus our time on the selectors for the <a href="https://github.com/DaveMBush/SmartNgRX/blob/main/apps/demo-ngrx-classic/src/app/routes/tree-standard" class="ngde">Tree (Standard)</a> page.</p><h2 id="feature-selectors" href="ngrx-demo-walkthrough/selectors" headinglink="true" class="ngde">Feature Selectors<ng-doc-heading-anchor class="ng-doc-anchor ngde" anchor="feature-selectors"></ng-doc-heading-anchor></h2><p class="ngde">All our feature selectors for a route are located in the same folder, <a href="https://github.com/DaveMBush/SmartNgRX/tree/main/apps/demo-ngrx-classic/src/app/routes/tree-standard/store/selectors" class="ngde">tree-standard-state.selectors.ts</a>. Notice there are two. One for the state that uses standard NgRX and one for the state that uses SmartNgRX.</p><h2 id="top-selectors" href="ngrx-demo-walkthrough/selectors" headinglink="true" class="ngde">Top Selectors<ng-doc-heading-anchor class="ng-doc-anchor ngde" anchor="top-selectors"></ng-doc-heading-anchor></h2><p class="ngde">The main selector in our top selector is <a href="https://github.com/DaveMBush/SmartNgRX/blob/main/apps/demo-ngrx-classic/src/app/routes/tree-standard/store/top/select-top-locations.selectors.ts" class="ngde">selectTopLocations</a> you'll see that it uses <code class="ngde">selectTopEntities</code> as the first parameter which is used to retrieve the top entity slice from the feature. The second parameter is the array of <code class="ngde">ChildDefinition</code>s which has just one item because the list of IDs we will use to retrieve the locations is the<code class="ngde">locations</code> field.</p><p class="ngde">You'll also notice, if you dig deeper into the code, that selectTopLocations is not used in the tree component. There is one more layer yet.</p><p class="ngde"><a href="https://github.com/DaveMBush/SmartNgRX/blob/main/apps/demo-ngrx-classic/src/app/routes/tree-standard/store/locations/selectors/select-locations.selector.ts" class="ngde">selectLocations</a> is where all the magic happens. This code is a regular selector that accesses the appropriate field in the top entity that has the list of locations. When you access it, it will trigger the retrieval of the locations so that what this selector returns is the locations.</p><p class="ngde"><code class="ngde">selectLocations</code> is what we use in the route's tree component.</p><h2 id="current-location-selectors" href="ngrx-demo-walkthrough/selectors" headinglink="true" class="ngde">Current Location Selectors<ng-doc-heading-anchor class="ng-doc-anchor ngde" anchor="current-location-selectors"></ng-doc-heading-anchor></h2><p class="ngde">The <a href="https://github.com/DaveMBush/SmartNgRX/blob/main/apps/demo-ngrx-classic/src/app/routes/tree-standard/store/current-location/select-current-location.selector.ts" class="ngde">selectCurrentLocationId</a> simply pulls out the currently selected location ID from the state.</p><h2 id="location-selectors" href="ngrx-demo-walkthrough/selectors" headinglink="true" class="ngde">Location Selectors<ng-doc-heading-anchor class="ng-doc-anchor ngde" anchor="location-selectors"></ng-doc-heading-anchor></h2><p class="ngde">The <a href="https://github.com/DaveMBush/SmartNgRX/tree/main/apps/demo-ngrx-classic/src/app/routes/tree-standard/store/locations/selectors" class="ngde">Location Selectors</a> holds selectors that will give us access to the locations and the selected location.</p><p class="ngde">Once again, we see our <code class="ngde ng-doc-code-with-link"><a href="smart-ngrx-api/functions/smart-ngrx-api/createSmartSelector" class="ng-doc-code-anchor ngde">createSmartSelector</a>()</code> being used to retrieve the locations and the children of the locations. In this case, the departments. It takes our <code class="ngde">selectLocationEntities()</code> as the first parameter and the array of <code class="ngde">ChildDefinition</code>s as the second parameter.</p><p class="ngde">The other select we need here is the one that provides the currently selected location. This standard NgRX selector uses the <code class="ngde">selectLocationDepartments()</code> and <code class="ngde">selectCurrentLocationId()</code> we've already covered as parameter and then uses those to return the selected location, if it exists. Otherwise it returns a default location that has no departments.</p><h2 id="department-selectors" href="ngrx-demo-walkthrough/selectors" headinglink="true" class="ngde">Department Selectors<ng-doc-heading-anchor class="ng-doc-anchor ngde" anchor="department-selectors"></ng-doc-heading-anchor></h2><p class="ngde">And so we continue down the stack and everything starts to look the same. The <a href="https://github.com/DaveMBush/SmartNgRX/tree/main/apps/demo-ngrx-classic/src/app/routes/tree-standard/store/department" class="ngde">Department Selectors</a> folder has the <code class="ngde">selectDepartments()</code> selector that is used to retrieve the department entities and the <code class="ngde">selectDepartmentsChildren()</code> select that is used to define how to access the department children.</p><h2 id="department-children-selectors" href="ngrx-demo-walkthrough/selectors" headinglink="true" class="ngde">Department Children Selectors<ng-doc-heading-anchor class="ng-doc-anchor ngde" anchor="department-children-selectors"></ng-doc-heading-anchor></h2><p class="ngde">And finally we come to the bottom of the tree where the only thing left to do is to select the <a href="https://github.com/DaveMBush/SmartNgRX/tree/main/apps/demo-ngrx-classic/src/app/routes/tree-standard/store/department-children" class="ngde">department children</a>.</p><h2 id="conclusion" href="ngrx-demo-walkthrough/selectors" headinglink="true" class="ngde">Conclusion<ng-doc-heading-anchor class="ng-doc-anchor ngde" anchor="conclusion"></ng-doc-heading-anchor></h2><p class="ngde">Notice how coming from the top, we combine selectors until we've retrieved all the data we need to create the tree. Next, we'll show how we only retrieve the data we need as it is needed. This is one of the main features of SmartNgRX. We don't retrieve everything all at once.</p>`,e=class e extends s{constructor(){super();this.pageType="guide";this.pageContent=v;this.editSourceFileUrl="https://github.com/DaveMBush/SmartNgRX/edit/main/apps/documentation/src/app/ngrx-demo-walkthrough/selectors/index.md?message=docs(): describe your changes here...";this.viewSourceFileUrl="https://github.com/DaveMBush/SmartNgRX/blob/release/apps/documentation/src/app/ngrx-demo-walkthrough/selectors/index.md";this.page=t;this.demoAssets=m}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=c({type:e,selectors:[["ng-doc-page-o7asb9ts"]],features:[l([{provide:s,useExisting:e},p,t.providers??[]]),i],decls:1,vars:0,template:function(o,b){o&1&&d(0,"ng-doc-page")},dependencies:[h],encapsulation:2,changeDetection:0});var a=e,x=[n(r({},(0,u.isRoute)(t.route)?t.route:{}),{path:"",component:a,title:"Selectors"})],U=x;export{a as PageComponent,U as default};
